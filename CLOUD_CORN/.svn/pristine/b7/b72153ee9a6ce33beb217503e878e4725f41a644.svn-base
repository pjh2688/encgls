CREATE TABLE ADMIN (
	ADMINID VARCHAR (50) NOT NULL COMMENT '관리자아이디',
	PASSWORD VARCHAR (42) NOT NULL COMMENT '비밀번호',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	ADMINNM VARCHAR (50) NULL COMMENT '관리자이름',
	PRIMARY KEY (ADMINID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '관리자'

;

CREATE TABLE BBS_FAQ (
	BBS_FAQUID INT (11) NOT NULL COMMENT '게시판_FAQ_고유번호',
	FAQ_QUESTION VARCHAR (2048) NULL COMMENT 'FAQ질문',
	FAQ_ANSWER TEXT NULL COMMENT 'FAQ답변',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	DOC_TYPE VARCHAR (2) NULL COMMENT '게시글타입',
	ADMINID VARCHAR (50) NULL COMMENT '관리자아이디',
	FILE_NAME VARCHAR (256) NULL COMMENT '파일원본명',
	FILE_ORIGINAL_NAME VARCHAR (1024) NULL COMMENT '저장파일고유명',
	PRIMARY KEY (BBS_FAQUID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '게시판_FAQ'

;

CREATE TABLE BBS_NOTICE (
	BBS_NOTICEUID INT (11) NOT NULL COMMENT '게시판_공지사항고유번호',
	TITLE VARCHAR (512) NULL COMMENT '제목',
	DOC_TYPE VARCHAR (2) NULL COMMENT '게시글타입',
	DOC_BODY_LONG TEXT NULL COMMENT '게시판본문',
	HIT_VIEWER INT (11) NOT NULL COMMENT '조회수',
	WRITER_IP VARCHAR (15) NULL COMMENT '작성자IP',
	READIP VARCHAR (20) NULL COMMENT '최근조회IP',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	ADMINID VARCHAR (50) NULL COMMENT '관리자아이디',
	FILE_NAME VARCHAR (256) NULL COMMENT '파일원본명',
	FILE_ORIGINAL_NAME VARCHAR (1024) NULL COMMENT '저장파일고유명',
	PRIMARY KEY (BBS_NOTICEUID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '게시판_공지사항'

;

CREATE TABLE BBS_QNA (
	BBS_QNAUID INT (11) NOT NULL COMMENT '게시판_문의하기고유번호',
	TITLE VARCHAR (512) NULL COMMENT '제목',
	DOC_TYPE VARCHAR (2) NULL COMMENT '게시글타입',
	DOC_BODY_LONG TEXT NULL COMMENT '게시판본문',
	HIT_VIEWER INT (11) NOT NULL COMMENT '조회수',
	WRITER_IP VARCHAR (15) NULL COMMENT '작성자IP',
	READIP VARCHAR (20) NULL COMMENT '최근조회IP',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	PASSWORD VARCHAR (42) NOT NULL COMMENT '비밀번호',
	WRITER_NM VARCHAR (50) NULL COMMENT '작성자이름',
	WRITER_MAIL VARCHAR (50) NULL COMMENT '작성자이메일',
	SECUYN VARCHAR (2) NULL COMMENT '비밀글여부',
	FILE_NAME VARCHAR (256) NULL COMMENT '파일원본명',
	FILE_ORIGINAL_NAME VARCHAR (1024) NULL COMMENT '저장파일고유명',
	PRIMARY KEY (BBS_QNAUID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '게시판_문의하기'

;

CREATE TABLE BBS_QNA_REPL (
	BBS_QNA_REPLUID INT (11) NOT NULL COMMENT '게시판_문의하기댓글고유번호',
	BBS_QNAUID INT (11) NOT NULL COMMENT '게시판_문의하기고유번호',
	DOC_BODY_LONG TEXT NULL COMMENT '게시판본문',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	ADMINID VARCHAR (50) NULL COMMENT '관리자아이디',
	FILE_NAME VARCHAR (256) NULL COMMENT '파일원본명',
	FILE_ORIGINAL_NAME VARCHAR (1024) NULL COMMENT '저장파일고유명',
	PRIMARY KEY (BBS_QNA_REPLUID,BBS_QNAUID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '게시판_문의하기댓글'

;

CREATE TABLE CLOUD_WMPT_LOC (
	DCT_CD VARCHAR (5) NOT NULL COMMENT '센터코드',
	TOT_LOC_CBM INT (9) NOT NULL COMMENT '총로케이션CBM',
	TOT_LOC_COUNT INT (9) NOT NULL COMMENT '총로케이션수',
	USE_LOC_CBM INT (9) NOT NULL COMMENT '사용로케이션CBM',
	USE_LOC_COUNT INT (9) NOT NULL COMMENT '사용로케이션수',
	NOT_USE_LOC_CBM INT (9) NOT NULL COMMENT '미사용로케이션CBM',
	NOT_USE_LOC_COUNT INT (9) NOT NULL COMMENT '미사용로케이션수',
	REG_USER VARCHAR (20) NULL COMMENT '공실등록자',
	UPT_USER VARCHAR (20) NULL COMMENT '공실수정자',
	REG_DATE TIMESTAMP NULL COMMENT '공실등록날짜',
	UPT_DATE TIMESTAMP NULL COMMENT '공실수정날짜',
	USERID VARCHAR (50) NOT NULL COMMENT '사용자ID',
	VC_TEMP VARCHAR (50) NULL COMMENT '센터보관유형',
	VC_SQA VARCHAR (20) NULL COMMENT '센터면적',
	APPLY_STARTDT VARCHAR (20) NULL COMMENT '공실정보_공개시작일자',
	APPLY_ENDDT VARCHAR (20) NULL COMMENT '공실정보_공개종료일자',
	PRIMARY KEY (DCT_CD,USERID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '공실정보'

;

CREATE TABLE FILE_ITEM (
	FILEUID INT (11) NOT NULL COMMENT '파일고유번호',
	FILE_LEN INT (11) NOT NULL COMMENT '파일크기',
	FILE_NAME VARCHAR (256) NULL COMMENT '파일원본명',
	FILE_EXT VARCHAR (20) NULL COMMENT '파일확장자',
	TBL_NAME VARCHAR (50) NOT NULL COMMENT '테이블명',
	TBLUID VARCHAR (20) NOT NULL COMMENT '테이블참조고유값',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	FILE_FIELDNUM INT (11) NOT NULL COMMENT '첨부필드순번',
	FILE_ORIGINAL_NAME VARCHAR (1024) NULL COMMENT '저장파일고유명',
	PRIMARY KEY (FILEUID,TBLUID,TBL_NAME)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '파일항목'

;

CREATE TABLE KTAPI_COMM (
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	KTAPI_COMM VARCHAR (1024) NULL COMMENT 'KTAPI_명령어',
	KTAPI_REQ VARCHAR (2048) NULL COMMENT 'KTAPI_요청전문',
	KTAPI_RES VARCHAR (2048) NULL COMMENT 'KTAPI_응답전문',
	KTAPI_COMMUID INT (11) NOT NULL AUTO_INCREMENT COMMENT 'KTAPI통신전문_고유번호',
	VMC_BTCUID INT (11) NULL COMMENT 'VM생성처리배치_고유번호',
	PRIMARY KEY (KTAPI_COMMUID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= 'KTAPI통신전문'

;

CREATE TABLE SEQUENCE (
	SEQNM VARCHAR (100) NOT NULL COMMENT '시퀀스컬럼명',
	SEQUID INT (11) NOT NULL COMMENT '시퀀스자동번호',
	PRIMARY KEY (SEQNM)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '시퀀스테이블'

;

CREATE TABLE SERVICE_CLOUD (
	CLOUD_L4_PUBLIC_IP VARCHAR (20) NULL COMMENT '클라우드_L4외부고정IP',
	CLOUD_DB_VMIP VARCHAR (20) NULL COMMENT '클라우드_DB내부VMIP',
	CLOUD_L4_VMIP VARCHAR (20) NULL COMMENT '클라우드_L4내부IP',
	CLOUD_WAS_DEFAULT_VMIP VARCHAR (20) NULL COMMENT '클라우드_WAS디폴트VMIP',
	CLOUD_WASVM_HOST_NAME VARCHAR (50) NULL COMMENT '클라우드_WASVM_HOST_이름',
	CLOUD_DBVM_HOST_NAME VARCHAR (50) NULL COMMENT '클라우드_DBVM_HOST_이름',
	CLOUD_VMGRP VARCHAR (50) NULL COMMENT '클라우드_VM그룹이름',
	CLOUD_AUTOSCALE_GRPNM VARCHAR (50) NULL COMMENT '클라우드_오토스케일_그룹이름',
	USERID VARCHAR (50) NOT NULL COMMENT '사용자ID',
	CONT_NO INT (11) NOT NULL COMMENT '계약번호',
	CLOUD_AUTOSCALE_POLICY VARCHAR (50) NULL COMMENT '클라우드_오토스케일_정책이름',
	PRIMARY KEY (USERID,CONT_NO)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '서비스_클라우드'

;

CREATE TABLE SERVICE_CONT (
	USERID VARCHAR (50) NOT NULL COMMENT '사용자ID',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	MODIFYDT TIMESTAMP NULL COMMENT '수정날짜',
	SERVICE_IOT_YN VARCHAR (2) NULL DEFAULT 'N' COMMENT '서비스_IOT_사용여부',
	SERVICE_BLOCK_YN VARCHAR (2) NULL DEFAULT 'N' COMMENT '서비스_블럭체인_사용여부',
	SERVICE_STATUS VARCHAR (2) NULL COMMENT '서비스_상태',
	CONT_NO INT (11) NOT NULL COMMENT '계약번호',
	SERVICE_TYPE_PL VARCHAR (10) NOT NULL COMMENT '서비스_종류',
	PRIMARY KEY (USERID,CONT_NO)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '서비스_계약'

;

CREATE TABLE USER (
	USERID VARCHAR (50) NOT NULL COMMENT '사용자ID',
	PASSWORD VARCHAR (42) NOT NULL COMMENT '비밀번호',
	USERNM VARCHAR (50) NULL COMMENT '담당자이름',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	STATUSCD VARCHAR (1) NULL COMMENT '상태코드',
	DROPDT TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP COMMENT '탈퇴날짜',
	MODIFYDT TIMESTAMP NULL COMMENT '수정날짜',
	HPHONE VARCHAR (14) NULL COMMENT '휴대전화번호',
	EMAIL VARCHAR (100) NOT NULL COMMENT '이메일',
	CEONM VARCHAR (50) NULL COMMENT '사업자CEO이름',
	COMP_NAME VARCHAR (100) NULL COMMENT '사업자상호',
	BIZNUM VARCHAR (14) NULL COMMENT '사업자등록번호',
	COR_NUM VARCHAR (12) NULL COMMENT '법인등록번호',
	COMP_ADDR VARCHAR (200) NULL COMMENT '사업장주소',
	COMP_TEL VARCHAR (20) NULL COMMENT '사업장전화번호',
	APPROVALDT TIMESTAMP NULL COMMENT '승인날짜',
	COMP_FAX VARCHAR (14) NULL COMMENT '사업장FAX번호',
	KTCLOUDID VARCHAR (50) NULL COMMENT 'KT클라우드아이디',
	PRIMARY KEY (USERID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= '사용자'

;

CREATE UNIQUE INDEX USERID ON USER (USERID);

CREATE UNIQUE INDEX EMAIL ON USER (EMAIL);

CREATE TABLE VMC_BTC (
	VMC_BTCUID INT (11) NOT NULL AUTO_INCREMENT COMMENT 'VM생성처리배치_고유번호',
	VMC_BTC_STATUS VARCHAR (4) NULL COMMENT 'VM생성처리배치_상태',
	VMC_BTC_STATUS_MSG VARCHAR (255) NULL COMMENT 'VM생성처리배치_상태메시지',
	REGDT TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '등록날짜',
	USERID VARCHAR (50) NULL COMMENT '사용자ID',
	CONT_NO INT (11) NULL COMMENT '계약번호',
	VMC_BTC_STEP INT (11) NOT NULL COMMENT 'VM생성처리배치_단계',
	PRIMARY KEY (VMC_BTCUID)
) ENGINE=INNODB DEFAULT CHARSET=utf8 COMMENT= 'VM생성처리배치'

;

ALTER TABLE BBS_FAQ
ADD FOREIGN KEY R_160 (ADMINID) REFERENCES ADMIN (ADMINID);
ALTER TABLE BBS_NOTICE
ADD FOREIGN KEY R_158 (ADMINID) REFERENCES ADMIN (ADMINID);
ALTER TABLE BBS_QNA_REPL
ADD FOREIGN KEY R_162 (BBS_QNAUID) REFERENCES BBS_QNA (BBS_QNAUID);
ALTER TABLE BBS_QNA_REPL
ADD FOREIGN KEY R_163 (ADMINID) REFERENCES ADMIN (ADMINID);
ALTER TABLE KTAPI_COMM
ADD FOREIGN KEY R_177 (VMC_BTCUID) REFERENCES VMC_BTC (VMC_BTCUID);
ALTER TABLE SERVICE_CLOUD
ADD FOREIGN KEY R_178 (USERID, CONT_NO) REFERENCES SERVICE_CONT (USERID, CONT_NO);
ALTER TABLE SERVICE_CONT
ADD FOREIGN KEY R_174 (USERID) REFERENCES USER (USERID);
ALTER TABLE VMC_BTC
ADD FOREIGN KEY R_179 (USERID, CONT_NO) REFERENCES SERVICE_CONT (USERID, CONT_NO);
